<UserControl x:Class="SmartQB.UI.Views.PaperCompositionView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
             xmlns:local="clr-namespace:SmartQB.UI.Views"
             xmlns:vm="clr-namespace:SmartQB.UI.ViewModels"
             d:DataContext="{d:DesignInstance Type=vm:PaperCompositionViewModel}"
             mc:Ignorable="d"
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="300"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Basket List -->
        <Grid Grid.Column="0" Background="#F5F5F5">
             <Grid.RowDefinitions>
                 <RowDefinition Height="Auto"/>
                 <RowDefinition Height="*"/>
                 <RowDefinition Height="Auto"/>
             </Grid.RowDefinitions>
             <TextBlock Text="Question Basket" FontSize="18" FontWeight="Bold" Margin="10"/>

             <ListView Grid.Row="1" ItemsSource="{Binding Basket}" Margin="10" BorderThickness="0" Background="Transparent">
                 <ListView.ItemTemplate>
                     <DataTemplate>
                         <Grid Margin="0,5">
                             <Grid.ColumnDefinitions>
                                 <ColumnDefinition Width="*"/>
                                 <ColumnDefinition Width="Auto"/>
                             </Grid.ColumnDefinitions>
                             <TextBlock Text="{Binding Content}" TextTrimming="CharacterEllipsis" MaxHeight="40" ToolTip="{Binding Content}"/>
                             <Button Grid.Column="1" Content="X" Command="{Binding DataContext.RemoveFromBasketCommand, RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding}" Margin="5,0,0,0" Width="20" Height="20" Background="#DC3545" Foreground="White" BorderThickness="0" FontSize="10" FontWeight="Bold"/>
                         </Grid>
                     </DataTemplate>
                 </ListView.ItemTemplate>
             </ListView>

             <StackPanel Grid.Row="2" Margin="10">
                 <CheckBox Content="Teacher Version (With Logic/Tags)" IsChecked="{Binding IsTeacherVersion}" Margin="0,0,0,10"/>
                 <Button Content="Generate &amp; Export PDF" Command="{Binding ExportCommand}" Height="40" Background="#28A745" Foreground="White" FontWeight="Bold" BorderThickness="0"/>
             </StackPanel>
        </Grid>

        <!-- Preview -->
        <Grid Grid.Column="1" Background="White">
            <wv2:WebView2 Name="PreviewWebView"/>
        </Grid>
    </Grid>
</UserControl>
